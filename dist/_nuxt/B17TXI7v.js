import{n as N,m as R,u as T,r as i,c as x,a as s,d as U,t,v as o,b as _,w as A,F as W,o as v,x as w,H as B,z as H,E as L}from"./BDtLa2_E.js";import{_ as q}from"./CTv9vq5-.js";import{s as O}from"./CQq0vrkk.js";const Z={class:"login_container"},G={class:"login"},I={class:"login_tit"},J={class:"login_input input-group"},K={class:"mt-3",for:"new_password"},Q={class:"login_input input-group"},X={class:"mt-3",for:"new_password_confirmation"},Y=["disabled"],ss={class:"d-none",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",id:"open_modal"},es={class:"modal fade resetPW",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},os={class:"modal-dialog modal-dialog-centered",style:{"max-width":"400px"}},as={class:"modal-content px-4"},ts={class:"modal-body text-center fs-5 py-5"},ns={key:0},ls={style:{"letter-spacing":"2px"}},rs={key:1},ds={style:{"letter-spacing":"2px"}},is={class:"modal-footer border-0 justify-content-center pb-4"},ms={__name:"reset-password",setup(_s){const y=N(),z=R(),a=T(),n=i({new_password:!1,new_password_confirmation:!1}),C=i(y.query.token),D=i(y.query.email),u=i(""),g=i(""),f=i(!1),c=i(""),P=()=>{$("#close_modal").click(),z.push("/")},p=m=>{m?n.value.new_password_confirmation=!n.value.new_password_confirmation:n.value.new_password=!n.value.new_password},j=async()=>{f.value=!0;const m=`${a.baseUrl}api/v2/password/update`,e=O(u.value.toString());let l=new FormData;l.append("email",D.value),l.append("token",C.value),l.append("password",e),l.append("password_confirmation",e);try{const r=await fetch(m,{method:"POST",headers:{Authorization:"Bearer "+a.userData.jwtToken},body:l}),b=await r.json();r.ok&&(c.value=b,$("#open_modal").click())}catch(r){console.log(r)}f.value=!1};return(m,e)=>{var h,k,V;const l=H,r=L,b=W;return v(),x("div",Z,[s("div",G,[s("div",I,[e[6]||(e[6]=s("img",{class:"login_logo",src:q,alt:"logo"},null,-1)),U(" "+t((h=o(a).language_txt.auth)==null?void 0:h.text_reset_password),1)]),_(b,{id:"login",class:"mt-3",onSubmit:j},{default:A(({errors:M})=>{var E,F,S;return[s("div",J,[s("label",K,t((E=o(a).language_txt.auth)==null?void 0:E.column_password),1),_(l,{class:w(["form-control",{error:M.new_password}]),name:"new_password",type:o(n).new_password?"text":"password",id:"new_password",placeholder:o(a).language_txt.auth.text_password_rule,modelValue:o(u),"onUpdate:modelValue":e[0]||(e[0]=d=>B(u)?u.value=d:null),rules:{required:!0,regex:/^(?=.*[A-Za-z]).{8,16}$/},label:o(a).language_txt.auth.column_new_password},null,8,["class","type","placeholder","modelValue","label"]),s("span",{class:"input-group-text",onMousedown:e[1]||(e[1]=d=>p(0)),onMouseup:e[2]||(e[2]=d=>p(0))},[s("i",{class:w(["fas",o(n).new_password?"fa-eye-slash":"fa-eye"])},null,2)],32),_(r,{class:"error__label fs-6",name:"new_password"})]),s("div",Q,[s("label",X,t(o(a).language_txt.auth.column_confirm_password),1),_(l,{class:w(["form-control",{error:M.new_password_confirmation}]),name:"new_password_confirmation",type:o(n).new_password_confirmation?"text":"password",id:"new_password_confirmation",placeholder:o(a).language_txt.auth.text_enter_new_password,modelValue:o(g),"onUpdate:modelValue":e[3]||(e[3]=d=>B(g)?g.value=d:null),rules:"required|confirmed:@new_password",label:o(a).language_txt.auth.column_confirm_password},null,8,["class","type","placeholder","modelValue","label"]),s("span",{class:"input-group-text",onMousedown:e[4]||(e[4]=d=>p(1)),onMouseup:e[5]||(e[5]=d=>p(1))},[s("i",{class:w(["fas",o(n).new_password_confirmation?"fa-eye-slash":"fa-eye"])},null,2)],32),_(r,{class:"error__label fs-6",name:"new_password_confirmation"})]),s("button",{class:"login_btn",type:"submit",disabled:o(f)},t((F=o(a).language_txt.default)==null?void 0:F.text_save),9,Y),s("button",ss,t((S=o(a).language_txt.default)==null?void 0:S.text_save),1)]}),_:1})]),e[10]||(e[10]=s("div",{class:"login_bg"},[s("img",{class:"login_logo",src:q,alt:"logo"})],-1)),s("div",es,[s("div",os,[e[9]||(e[9]=s("button",{type:"button",class:"d-none",id:"close_modal","data-bs-dismiss":"modal","aria-label":"Close"},[s("i",{class:"fas fa-times"})],-1)),s("div",as,[s("div",ts,[o(c).error?(v(),x("div",rs,[e[8]||(e[8]=s("i",{class:"fas fa-exclamation-circle me-2",style:{color:"#dc3545"}},null,-1)),s("span",ds,t(o(c).error),1)])):(v(),x("div",ns,[e[7]||(e[7]=s("i",{class:"far fa-check-circle me-2",style:{color:"#63E6BE"}},null,-1)),s("span",ls,t(o(c).success),1)]))]),s("div",is,[s("button",{type:"button",class:"btn sent_go",onClick:P},t((k=o(a).language_txt.default)==null?void 0:k.text_back)+t((V=o(a).language_txt.default)==null?void 0:V.text_login),1)])])])])])}}};export{ms as default};
