import{_ as N}from"./CaDaOOkr.js";import{u as C,m as E,n as M,r as b,p as k,q as A,c as t,a as s,b as u,w as f,s as O,F as R,o as a,t as o,v as e,d as g,x,y as V,z as J,E as P}from"./BDtLa2_E.js";const G={class:"bg-block"},H={class:"container"},I={class:"title"},K={class:"my-4"},L={key:0,class:"row"},Q={class:"col-lg-6 px-4 mb-lg-0 mb-4"},W={class:"title fs-3 mb-4"},X={class:"row bg-body p-4",style:{"border-radius":"5px"}},Y={class:"col-xxl-6 col-12 mb-2"},Z={class:"user-data"},ee={class:"col-4"},se={key:0,class:"col"},oe={key:1,class:"col"},te={class:"col-xxl-6 col-12 mb-2"},ae={class:"user-data"},le={class:"col-4"},_e={key:0,class:"col"},ce={key:1,class:"col"},de={class:"col-md-12 mb-2"},ne={class:"user-data"},ie={class:"col-xxl-2 col-4"},re={key:0,class:"col"},me={key:1,class:"col"},ue={class:"col-xxl-6 col-12 mb-2"},he={class:"user-data"},pe={class:"col-4"},ve={key:0,class:"col"},ye={key:1,class:"col"},ge={class:"col-xxl-6 col-12 mb-2"},xe={class:"user-data"},be={class:"col-4"},ke={key:0,class:"col"},fe={key:1,class:"col"},Ve={class:"col-xxl-6 col-12 mb-2"},we={class:"user-data"},qe={class:"col-4"},$e={key:0,class:"col"},ze={key:1,class:"col"},Ue={class:"col-xxl-6 col-12 mb-2"},De={class:"user-data"},Se={class:"col-4"},Te={key:0,class:"col"},je={key:1,class:"col"},Be={class:"col-xxl-6 col-12 mb-2"},Fe={class:"user-data"},Ne={class:"col-4"},Ce={key:0,class:"col"},Ee={key:0},Me={key:1},Ae={key:1,class:"col"},Oe={class:"col-xxl-6 col-12 mb-2"},Re={class:"user-data"},Je={class:"col-4"},Pe={key:0,class:"col"},Ge={key:0},He={key:1},Ie={key:1,class:"col"},Ke={class:"col-xxl-6 col-12 mb-2"},Le={class:"user-data"},Qe={class:"col-4"},We={key:0,class:"col"},Xe={key:0},Ye={key:1},Ze={key:1,class:"col"},es={class:"col-xxl-6 col-12 mb-2"},ss={class:"user-data"},os={class:"col-4"},ts={key:0,class:"col"},as={key:0},ls={key:1},_s={key:1,class:"col"},cs={class:"col-md-12 mb-2"},ds={class:"user-data"},ns={class:"col-2"},is={key:0,class:"col"},rs={key:0},ms={key:1},us={key:1,class:"col"},hs={class:"col-md-12 mb-2"},ps={class:"user-data"},vs={class:"col-2"},ys={key:0,class:"col"},gs={key:0},xs={key:1},bs={key:1,class:"col"},ks={class:"col-lg-6 px-4 d-flex flex-column"},fs={class:"title fs-3 mb-4"},Vs={class:"box_shadow flex-auto p-4 px-5",style:{"border-radius":"5px"}},ws={class:"col-md-12 mb-3"},qs={class:"col-3 form-label"},$s={value:"pickup"},zs={value:"delivery"},Us={class:"col-md-12 mb-3"},Ds={class:"col-3 form-label"},Ss={class:"col-md-12 mb-3"},Ts={class:"col-3 form-label"},js={class:"col-md-12 mb-3"},Bs={class:"col-3 form-label"},Fs={class:"col-md-12 mb-3"},Ns={class:"col-3 form-label"},Cs={class:"text-center mt-5"},Es={key:0,type:"submit",class:"btn sent_go"},Ms={key:1,type:"submit",class:"btn sent_go"},Ps={__name:"index",setup(As){const l=C(),w=E(),d=M().query.id,_=b(),c=b({});b();const v=k(()=>c.value.delivery_method=="delivery"),q=k(()=>c.value.status_code=="Draft"),S=k(()=>d?`/order-list/item?id=${d}`:"/home"),T=async r=>{l.show_loading(!0);const n=`${l.baseUrl}api/v2/sales/orders/header/save?locale=${l.language}`,i={delivery_method:r.delivery_method,dealer_id:_.value.employer_company_id,dealer_name:_.value.employer_company_name,employer_company_code:_.value.employer_company_code,salesperson_id:_.value.id,salesperson_first_name:_.value.first_name,salesperson_last_name:_.value.last_name,salesperson_email:_.value.email,salesperson_telephone:_.value.telephone||"",salesperson_mobile:_.value.mobile||"",customer_first_name:r.customer_first_name,customer_last_name:r.customer_last_name,shipping_recipient:r.customer_last_name+r.customer_first_name,customer_email:_.value.email,status_code:"Draft",side_mark:r.side_mark,note:r.note||"",tax:_.value.tax_id_number||""};v.value&&(c.value.salesperson_id==_.value.user_id||!d)&&(i.shipping_country_code=_.value.country_code||"",i.shipping_zip_code=_.value.zip_code||"",i.shipping_state=_.value.state||"",i.shipping_city=_.value.city||"",i.shipping_address1=_.value.address1||"",i.shipping_address2=_.value.address2||""),d&&(i.order_id=d,i.material=c.value.material,i.quantity=c.value.quantity,i.sqm=c.value.sqm,i.status_code=i.status_code);try{const h=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l.userData.jwtToken},body:JSON.stringify(i)}),p=await h.json();h.ok&&d?w.push(`/order-list/item?id=${d}`):h.ok&&p.order_id&&w.push(`create_order/order?id=${p.order_id}`)}catch(h){console.log(h)}l.show_loading(!1)},j=async()=>{const r=await l.get_user_data();_.value=r},B=async()=>{const r=`${l.baseUrl}api/v2/sales/orders/info?locale=${l.language}&equal_id=${d}`;try{const n=await fetch(r,{headers:{Authorization:"Bearer "+l.userData.jwtToken}}),i=await n.json();n.ok&&i.success&&(c.value=i.response,console.log(c.value),!q.value&&d&&O(()=>{$(".table-box input").attr("disabled",!0),$(".table-box select").attr("disabled",!0),$(".table-box textarea").attr("disabled",!0)}))}catch(n){console.log(n)}};return l.show_loading(!0),A(async()=>{await j(),d&&await B(),l.show_loading(!1)}),(r,n)=>{const i=N,h=J,p=P,F=R;return a(),t("section",G,[s("div",H,[u(F,{class:"table-box",onSubmit:T},{default:f(({errors:y})=>{var z,U,D;return[s("h2",I,o((z=e(l).language_txt.order)==null?void 0:z.text_information),1),s("div",K,[u(i,{to:e(S),class:"btn link"},{default:f(()=>{var m;return[g(o((m=e(l).language_txt.default)==null?void 0:m.text_back),1)]}),_:1},8,["to"])]),e(_)?(a(),t("div",L,[s("div",Q,[s("h3",W,o(e(l).language_txt.order.text_salesperson_information),1),s("div",X,[s("div",Y,[s("div",Z,[s("span",ee,o(e(l).language_txt.order.column_dealer_code),1),e(d)?(a(),t("div",oe,o(e(c).dealer_code),1)):(a(),t("div",se,o(e(_).employer_company_code),1))])]),s("div",te,[s("div",ae,[s("span",le,o(e(l).language_txt.order.column_tax_id_num),1),e(d)?(a(),t("div",ce,o((U=e(c).dealer)==null?void 0:U.tax_id_number),1)):(a(),t("div",_e,o(e(_).tax_id_num),1))])]),s("div",de,[s("div",ne,[s("span",ie,o(e(l).language_txt.order.column_company_name),1),e(d)?(a(),t("div",me,o(e(c).dealer_name),1)):(a(),t("div",re,o(e(_).employer_company_name),1))])]),s("div",ue,[s("div",he,[s("span",pe,o(e(l).language_txt.order.column_salesperson_name),1),e(d)?(a(),t("div",ye,o(e(c).salesperson_name),1)):(a(),t("div",ve,o(e(_).name),1))])]),s("div",ge,[s("div",xe,[s("span",be,o(e(l).language_txt.order.column_salesperson_email),1),e(d)?(a(),t("div",fe,o(e(c).salesperson_email),1)):(a(),t("div",ke,o(e(_).email),1))])]),s("div",Ve,[s("div",we,[s("span",qe,o(e(l).language_txt.order.column_salesperson_mobile),1),e(d)?(a(),t("div",ze,o(e(c).salesperson_mobile),1)):(a(),t("div",$e,o(e(_).mobile),1))])]),s("div",Ue,[s("div",De,[s("span",Se,o(e(l).language_txt.order.column_salesperson_telephone),1),e(d)?(a(),t("div",je,o(e(c).salesperson_telephone),1)):(a(),t("div",Te,o(e(_).telephone),1))])]),s("div",Be,[s("div",Fe,[s("span",Ne,o(e(l).language_txt.member.column_country),1),e(v)?(a(),t("div",Ce,[e(d)?(a(),t("div",Me,o(e(c).shipping_country_code),1)):(a(),t("div",Ee,o(e(_).country_name),1))])):(a(),t("div",Ae))])]),s("div",Oe,[s("div",Re,[s("span",Je,o(e(l).language_txt.member.column_zip_code),1),e(v)?(a(),t("div",Pe,[e(d)?(a(),t("div",He,o(e(c).shipping_zip_code),1)):(a(),t("div",Ge,o(e(_).zip_code),1))])):(a(),t("div",Ie))])]),s("div",Ke,[s("div",Le,[s("span",Qe,o(e(l).language_txt.member.column_state),1),e(v)?(a(),t("div",We,[e(d)?(a(),t("div",Ye,o(e(c).shipping_state),1)):(a(),t("div",Xe,o(e(_).state),1))])):(a(),t("div",Ze))])]),s("div",es,[s("div",ss,[s("span",os,o(e(l).language_txt.member.column_city),1),e(v)?(a(),t("div",ts,[e(d)?(a(),t("div",ls,o(e(c).shipping_city),1)):(a(),t("div",as,o(e(_).city),1))])):(a(),t("div",_s))])]),s("div",cs,[s("div",ds,[s("span",ns,o(e(l).language_txt.member.column_address1),1),e(v)?(a(),t("div",is,[e(d)?(a(),t("div",ms,o(e(c).shipping_address1),1)):(a(),t("div",rs,o(e(_).address1),1))])):(a(),t("div",us))])]),s("div",hs,[s("div",ps,[s("span",vs,o(e(l).language_txt.member.column_address2),1),e(v)?(a(),t("div",ys,[e(d)?(a(),t("div",xs,o(e(c).shipping_address2),1)):(a(),t("div",gs,o(e(_).address2),1))])):(a(),t("div",bs))])])])]),s("div",ks,[s("h3",fs,o(e(l).language_txt.order.text_customer_information),1),s("div",Vs,[s("div",ws,[s("label",qs,[n[5]||(n[5]=s("span",{class:"text-danger"},"*",-1)),g(o(e(l).language_txt.order.column_shipping_to),1)]),u(h,{as:"select",name:"delivery_method",class:x([{error:y.delivery_method},"form-select"]),modelValue:e(c).delivery_method,"onUpdate:modelValue":n[0]||(n[0]=m=>e(c).delivery_method=m),rules:"required"},{default:f(()=>[s("option",$s,o(e(l).language_txt.order.text_delivery_method_pickup),1),s("option",zs,o(e(l).language_txt.order.text_delivery_method_delivery),1)]),_:2},1032,["class","modelValue"]),u(p,{class:"error__label",name:"delivery_method"})]),s("div",Us,[s("label",Ds,[n[6]||(n[6]=s("span",{class:"text-danger"},"*",-1)),g(o(e(l).language_txt.order.column_customer_first_name),1)]),u(h,{type:"text",class:x(["form-control",{error:y.customer_first_name}]),name:"customer_first_name",modelValue:e(c).customer_first_name,"onUpdate:modelValue":n[1]||(n[1]=m=>e(c).customer_first_name=m),rules:"required"},null,8,["class","modelValue"]),u(p,{class:"error__label",name:"customer_first_name"})]),s("div",Ss,[s("label",Ts,[n[7]||(n[7]=s("span",{class:"text-danger"},"*",-1)),g(o(e(l).language_txt.order.column_customer_last_name),1)]),u(h,{type:"text",class:x(["form-control",{error:y.customer_last_name}]),name:"customer_last_name",modelValue:e(c).customer_last_name,"onUpdate:modelValue":n[2]||(n[2]=m=>e(c).customer_last_name=m),rules:"required"},null,8,["class","modelValue"]),u(p,{class:"error__label",name:"customer_last_name"})]),s("div",js,[s("label",Bs,[n[8]||(n[8]=s("span",{class:"text-danger"},"*",-1)),g(o(e(l).language_txt.order.column_side_mark),1)]),u(h,{type:"text",class:x(["form-control",{error:y.side_mark}]),name:"side_mark",modelValue:e(c).side_mark,"onUpdate:modelValue":n[3]||(n[3]=m=>e(c).side_mark=m),rules:"required"},null,8,["class","modelValue"]),u(p,{class:"error__label",name:"side_mark"})]),s("div",Fs,[s("label",Ns,o(e(l).language_txt.order.text_option_section_note),1),u(h,{as:"textarea",class:x(["form-control",{error:y.note}]),modelValue:e(c).note,"onUpdate:modelValue":n[4]||(n[4]=m=>e(c).note=m),name:"note"},null,8,["class","modelValue"]),u(p,{class:"error__label",name:"note"})])])])])):V("",!0),s("div",Cs,[e(d)&&e(q)?(a(),t("button",Es,o((D=e(l).language_txt.default)==null?void 0:D.text_save),1)):V("",!0),e(d)?V("",!0):(a(),t("button",Ms,o(e(l).language_txt.default.text_continue),1))])]}),_:1})])])}}};export{Ps as default};
