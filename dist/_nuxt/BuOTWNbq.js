import{_ as V}from"./CuDQHfdM.js";import{u as j,r as v,q as z,c as l,a as t,v as o,B as p,C as k,y as m,o as n,b as D,w as $,x as q,t as a,d}from"./B4Idg1NY.js";const O={class:"bg-block d-flex align-items-center"},T={class:"container-xl"},U={key:0,class:"row mb-5"},I={key:0,class:"col-lg-3 col-md-6 mb-lg-0 mb-4"},E={class:"createtime"},F={class:"fw-bold"},L={class:"pt-2"},M={class:"fw-bold"},G={class:"fw-bold"},H={class:"fw-bold"},J={class:"fw-bold"},K={class:"fw-bold"},P={key:0},Q={class:"fw-bold"},Y={__name:"home",setup(R){var f,x,h,b,y,w;const e=j(),u=v();e.role;const S=v([{icon:"fa-plus",title:(f=e.language_txt.order)==null?void 0:f.text_add_order,router:"create_order",roles:["salesperson","dealer","sunline"]},{icon:"fa-history",title:(x=e.language_txt.order)==null?void 0:x.tab_data,router:"order-list",roles:["salesperson"]},{icon:"fa-clipboard-list",title:(h=e.language_txt.order)==null?void 0:h.text_manage_order,router:"order-list",roles:["dealer","sunline"]},{icon:"fa-file-circle-check",title:(b=e.language_txt.order)==null?void 0:b.text_confirmed_orders,router:"order-list?status=DealerApproved",roles:["salesperson"]},{icon:"fa-user-pen",title:(y=e.language_txt.default)==null?void 0:y.text_basic_information,router:"user-info",roles:["salesperson","dealer","sunline"]},{icon:"fa-gear",title:(w=e.language_txt.order)==null?void 0:w.text_option_setting,router:"/order-setting",roles:["dealer","sunline"]}]),A=_=>{if(e.role)return _.some(i=>i==Object.keys(e.role))},B=async()=>{const _=new Date,i=_.toISOString().substring(0,10),s=new Date(_.getTime()-10*24*60*60*1e3).toISOString().substring(0,10);let r=`${e.baseUrl}api/v2/sales/orders/list?locale=${e.language}&equal_salesperson_id=${e.userData.member_id}&limit=6`;e.is_dealer?r=`${e.baseUrl}api/v2/sales/orders/list?locale=${e.language}&equal_dealer_id=${e.userData.employer_company_id}&limit=6`:e.is_corporate&&(r=`${e.baseUrl}api/v2/sales/orders/list?locale=${e.language}&limit=6`);const C=`&filter_order_date=${s}-${i}`;r=r+C;try{const c=await fetch(r,{headers:{Authorization:"Bearer "+e.userData.jwtToken}}),N=await c.json();c.ok&&(u.value=N.response.data)}catch(c){console.log("error",c)}};return e.show_loading(!0),z(async()=>{e.userData&&await B(),e.show_loading(!1)}),(_,i)=>{const g=V;return n(),l("section",O,[t("div",T,[!o(e).loading&&o(u)?(n(),l("div",U,[(n(!0),l(p,null,k(o(S),(s,r)=>(n(),l(p,{key:"link_"+r},[A(s.roles)?(n(),l("div",I,[D(g,{class:"btn-home",to:s.router},{default:$(()=>[t("i",{class:q(["fas",s.icon])},null,2),t("h2",null,a(s.title),1)]),_:2},1032,["to"])])):m("",!0)],64))),128)),(n(!0),l(p,null,k(o(u),(s,r)=>(n(),l("div",{class:"col-lg-4 col-md-6 mt-5",key:"order_"+r},[D(g,{to:`order-list/item?id=${s.id}`,class:"home-order"},{default:$(()=>[t("div",E,[t("span",F,a(s.created_at.slice(0,16)),1),t("span",{class:q(["tag m-0",o(e).status_colors(s.status_code)])},a(s.status_name),3)]),t("div",L,[t("span",M,a(o(e).language_txt.order.text_orders)+a(o(e).language_txt.order.column_code)+"：",1),d(a(s.code),1)]),t("div",null,[t("span",G,a(o(e).language_txt.order.column_customer_name)+"：",1),d(a(s.customer_name),1)]),t("div",null,[t("span",H,a(o(e).language_txt.member.column_address1)+"：",1),d(a(s.shipping_address1)+a(s.shipping_address2),1)]),t("div",null,[t("span",J,a(o(e).language_txt.order.column_total_quantity)+"：",1),d(a(s.quantity),1)]),t("div",null,[t("span",K,a(o(e).language_txt.order.column_sqm)+"：",1),d(a(s.sqm),1)]),o(e).is_dealer||o(e).userData.parent_id==0?(n(),l("div",P,[t("span",Q,a(o(e).language_txt.order.text_order_comment_identity_salesperson)+"：",1),d(a(s.salesperson_name),1)])):m("",!0),i[0]||(i[0]=t("i",{class:"fa-solid fa-pen"},null,-1))]),_:2},1032,["to"])]))),128))])):m("",!0)])])}}};export{Y as default};
