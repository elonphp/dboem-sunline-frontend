import{_ as F}from"./CaDaOOkr.js";import{u as N,n as V,r as m,p as D,q as T,c as p,a,v as t,t as n,b as u,w as S,y as C,F as O,o as g,d as A,B as M,C as U,I as q,z as E,N as I}from"./BDtLa2_E.js";const J={class:"bg-block"},L={class:"container"},P={class:"title"},R={class:"my-4"},G={class:"table"},K={class:"text-center mt-5"},Q=["disabled"],tt={__name:"[id]",setup(W){const e=N(),j=V().params.id,o=m();m([]);const h=m(!1),x=m(1);D(()=>e.language=="zh_Hant"?"en":"zh_Hant");const f=async()=>{const d=`${e.baseUrl}api/v2/dealers/option/list?locale=${e.language}`;try{const r=await fetch(d,{headers:{Authorization:"Bearer "+e.userData.jwtToken}});if(r.ok){const _=await r.json();o.value=Object.values(_.response.data).find(s=>s.id==j&&s.option_values)}}catch(r){console.log("err",r)}},B=async d=>{e.show_loading(!0),h.value=!0;const r={dealer_id:e.userData.employer_company_id,options:d.options};try{const _=`${e.baseUrl}api/v2/dealers/option/saveMany`,s=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.userData.jwtToken},body:JSON.stringify(r)}),c=await s.json();s.ok&&!c.error?(alert(c.success),await f(),x.value++,e.show_loading(!1)):alert(c.error)}catch(_){console.log(_)}h.value=!1};return e.show_loading(!0),T(async()=>{await f(),e.show_loading(!1)}),(d,r)=>{const _=F,s=E,c=O;return g(),p("section",J,[a("div",L,[t(o)?(g(),p("div",{class:"table-box",key:t(x)},[a("h2",P,n(t(e).language_txt.default.text_setting)+" - "+n(t(o).name),1),a("div",R,[u(_,{to:"/order-setting",class:"btn link"},{default:S(()=>{var v;return[A(n((v=t(e).language_txt.default)==null?void 0:v.text_back),1)]}),_:1})]),u(c,{class:"table-inner",onSubmit:B},{default:S(({values:v})=>{var b;return[a("table",G,[a("thead",null,[a("tr",null,[a("th",null,n(t(e).language_txt.default.text_type2),1),a("th",null,n(t(e).language_txt.option.text_original_name)+"("+n(t(e).language_txt.default.text_language_en)+")",1),a("th",null,n(t(e).language_txt.option.text_original_name)+"("+n(t(e).language_txt.default.text_language_zh_Hant)+")",1),a("th",null,n(t(e).language_txt.option.text_custom_name)+"("+n(t(e).language_txt.default.text_language_en)+")",1),a("th",null,n(t(e).language_txt.option.text_custom_name)+"("+n(t(e).language_txt.default.text_language_zh_Hant)+")",1)])]),a("tbody",null,[(g(!0),p(M,null,U(t(o).option_values,(l,i)=>{var y,w,$,k,z,H;return g(),p("tr",{key:"item_"+i},[a("td",null,n(l.code),1),a("td",null,n((y=l.translations)==null?void 0:y.en),1),a("td",null,n((w=l.translations)==null?void 0:w.zh_Hant),1),a("td",null,[u(s,{type:"text",name:`options.${t(o).code}.option_values[${i}].option_value_dealers.en.name`,class:"form-control w-50 m-auto text-center",value:(($=l.custom_translations)==null?void 0:$.en)||((k=l.translations)==null?void 0:k.en)},null,8,["name","value"])]),a("td",null,[u(s,{type:"text",name:`options.${t(o).code}.option_values[${i}].option_value_dealers.zh_Hant.name`,class:"form-control w-50 m-auto text-center",value:((z=l.custom_translations)==null?void 0:z.zh_Hant)||((H=l.translations)==null?void 0:H.zh_Hant)},null,8,["name","value"])]),q(a("td",null,[u(s,{type:"hidden",name:`options.${t(o).code}.option_id`,class:"form-control w-50 m-auto text-center",value:t(o).id},null,8,["name","value"]),u(s,{type:"hidden",name:`options.${t(o).code}.option_name`,class:"form-control w-50 m-auto text-center",value:t(o).name},null,8,["name","value"]),u(s,{type:"hidden",name:`options.${t(o).code}.option_values[${i}].option_value_name`,class:"form-control w-50 m-auto text-center",value:l.name},null,8,["name","value"]),u(s,{type:"hidden",name:`options.${t(o).code}.option_values[${i}].option_value_id`,class:"form-control w-50 m-auto text-center",value:l.id},null,8,["name","value"])],512),[[I,!1]])])}),128))])]),a("div",K,[a("button",{type:"submit",class:"btn sent_go",disabled:t(h)},n((b=t(e).language_txt.default)==null?void 0:b.text_save),9,Q)])]}),_:1})])):C("",!0)])])}}};export{tt as default};
