import{_ as D}from"./CuDQHfdM.js";import{K as E,u as $,r as u,q,c as y,a as s,t as a,v as e,b as r,w as k,y as S,G as C,F as M,o as x,d as N,x as g,z as P,E as L}from"./B4Idg1NY.js";import{s as z}from"./DBZ0GZbc.js";const O={class:"bg-block"},G={class:"container"},R={class:"table-box"},U={class:"title"},W={class:"my-4"},X={key:0,class:"user-info px-2"},I={class:"row mb-xl-4"},K={class:"col-xl-3 col-12 user-data"},Z={class:"col-xl-1 col-4"},H={class:"col-2"},J={class:"col-xl-3 user-data"},Q={class:"col-4"},Y={class:"col"},ss={class:"col-xl-3 user-data"},es={class:"col-4"},os={class:"col"},as={class:"col-xl-3 user-data"},ts={class:"col-4"},ls={class:"col"},cs={class:"row mb-xl-4"},ns={class:"col-xl-3 user-data"},_s={class:"col-4"},rs={class:"col"},ds={class:"col-xl-3 user-data"},is={class:"col-4"},ms={class:"col"},us={class:"col-xl-3 user-data"},ps={class:"col-xl-2 col-4"},hs={class:"col"},xs={class:"col-xl-3 user-data"},gs={class:"col-xl col-4"},ws={class:"col"},bs={class:"row mb-xl-4"},vs={class:"col-xl-1 user-data"},fs={class:"col-xl col-4"},ys={class:"col"},ks={class:"col-xl-2 user-data"},Ss={class:"col-xl col-4"},zs={class:"col"},Vs={class:"col-xl-2 user-data"},As={class:"col-xl col-4"},Fs={class:"col"},js={class:"col-xl-3 user-data flex-auto"},Ts={class:"col-xl-2 col-4"},Bs={class:"col"},Ds={class:"col-xl-3 user-data flex-auto"},Es={class:"col-xl-2 col-4"},$s={class:"col"},qs={class:"title mb-xl-4 my-xl-0 my-4"},Cs={class:"row mb-xl-4"},Ms={class:"col-12 row user-data pb-3 align-items-center"},Ns={class:"col-xl-1 col-4"},Ps={class:"form-box"},Ls={class:"col-12 row user-data pb-3 align-items-center"},Os={class:"col-xl-1 col-4"},Gs={class:"form-box"},Rs={class:"col-12 row user-data pb-3 align-items-center"},Us={class:"col-xl-1 col-4"},Ws={class:"form-box"},Xs={class:"text-center"},Is=["disabled"],Qs={__name:"user-info",setup(Ks){const{executeRecaptcha:V,recaptchaLoaded:A}=E(),o=$(),w=u(""),t=u(),h=u(!1);u(),u({password:"",new_password:"",confirm_new_password:""});const F=async()=>{o.show_loading(!0);const _=await o.get_user_data();t.value=_,o.show_loading(!1)},j=async _=>{const d=t.value.email,i=z(_.password.toString()),l=`${o.baseUrl}api/v2/login?email=${d}&password=${i}`,c={"google-recaptcha-v3-token":w.value};try{const n=await fetch(l,{method:"POST",body:o.jsonToFormData(c)}),p=await n.json();if(n.ok)return!p.error;alert(o.language_txt.error_old_password)}catch(n){console.log(n)}},T=async _=>{o.show_loading(!0),h.value=!0,await A();const d=await V("verify");w.value=d,await j(_)&&await B(_),h.value=!1,o.show_loading(!1)},B=async _=>{const d=`${o.baseUrl}api/v2/members/save`,i=z(_.new_password.toString());let l=new FormData;l.append("member_id",t.value.id),l.append("email",t.value.email),l.append("password",i);try{const c=await fetch(d,{method:"POST",headers:{Authorization:"Bearer "+o.userData.jwtToken},body:l}),n=await c.json();c.ok&&!n.error?(alert(n.success),o.logout()):alert(n.error)}catch(c){console.log(c)}};return q(()=>{F()}),(_,d)=>{var p,b,v;const i=D,l=P,c=L,n=M;return x(),y("section",O,[s("div",G,[s("div",R,[s("h2",U,a((p=e(o).language_txt.default)==null?void 0:p.text_basic_information),1),s("div",W,[r(i,{to:"/home",class:"btn link"},{default:k(()=>{var m;return[N(a((m=e(o).language_txt.default)==null?void 0:m.text_back),1)]}),_:1})]),e(t)?(x(),y("div",X,[s("div",I,[s("div",K,[s("span",Z,a((b=e(o).language_txt.member)==null?void 0:b.column_email),1),s("div",H,a(e(t).email),1)]),s("div",J,[s("span",Q,a(e(o).language_txt.member.column_first_name),1),s("div",Y,a(e(t).name),1)]),s("div",ss,[s("span",es,a(e(o).language_txt.member.column_telephone),1),s("div",os,a(e(t).telephone),1)]),s("div",as,[s("span",ts,a(e(o).language_txt.member.column_phone),1),s("div",ls,a(e(t).mobile),1)])]),s("div",cs,[s("div",ns,[s("span",_s,a(e(o).language_txt.member.column_dealer_code),1),s("div",rs,a(e(t).employer_company_code),1)]),s("div",ds,[s("span",is,a(e(o).language_txt.member.column_tax_id_num),1),s("div",ms,a(e(t).tax_id_num),1)]),s("div",us,[s("span",ps,a(e(o).language_txt.member.column_company_name),1),s("div",hs,a(e(t).employer_company_name),1)]),s("div",xs,[s("span",gs,a(e(o).language_txt.member.column_country),1),s("div",ws,a(e(t).country_name),1)])]),s("div",bs,[s("div",vs,[s("span",fs,a(e(o).language_txt.member.column_zip_code),1),s("div",ys,a(e(t).zip_code),1)]),s("div",ks,[s("span",Ss,a(e(o).language_txt.member.column_state),1),s("div",zs,a(e(t).state),1)]),s("div",Vs,[s("span",As,a(e(o).language_txt.member.column_city),1),s("div",Fs,a(e(t).city),1)]),s("div",js,[s("span",Ts,a(e(o).language_txt.member.column_address1),1),s("div",Bs,a(e(t).address1),1)]),s("div",Ds,[s("span",Es,a(e(o).language_txt.member.column_address2),1),s("div",$s,a(e(t).address2),1)])])])):S("",!0),s("h2",qs,a((v=e(o).language_txt.auth)==null?void 0:v.text_reset_password),1),e(t)?(x(),C(n,{key:1,class:"pw-reset px-2",onSubmit:T},{default:k(({errors:m})=>{var f;return[s("div",Cs,[s("div",Ms,[s("span",Ns,a(e(o).language_txt.member.column_old_password),1),s("div",Ps,[r(l,{type:"password",class:g(["form-control",{error:m.password}]),autocomplete:"off",name:"password",placeholder:e(o).language_txt.member.column_old_password,rules:"required",label:e(o).language_txt.member.column_old_password},null,8,["class","placeholder","label"]),r(c,{class:"error__label fs-6",name:"password"})])]),s("div",Ls,[s("span",Os,a(e(o).language_txt.member.column_new_password),1),s("div",Gs,[r(l,{type:"password",class:g(["form-control",{error:m.new_password}]),autocomplete:"off",name:"new_password",placeholder:e(o).language_txt.member.help_new_password,rules:{required:!0,regex:/^(?=.*[A-Za-z]).{8,16}$/},label:e(o).language_txt.member.column_new_password},null,8,["class","placeholder","label"]),r(c,{class:"error__label fs-6",name:"new_password"})])]),s("div",Rs,[s("span",Us,a(e(o).language_txt.member.column_confirm_password),1),s("div",Ws,[r(l,{type:"password",class:g(["form-control",{error:m.confirm_new_password}]),autocomplete:"off",name:"confirm_new_password",placeholder:e(o).language_txt.member.help_confirm_password,rules:"required|confirmed:@new_password",label:e(o).language_txt.member.column_confirm_password},null,8,["class","placeholder","label"]),r(c,{class:"error__label fs-6",name:"confirm_new_password"})])])]),s("div",Xs,[s("button",{class:"g-recaptcha login_btn",disabled:e(h),"data-sitekey":"6LcMcOwpAAAAALlXivXwE8zGjzVwpIm77jv9ft8a","data-action":"verify","data-callback":"onSubmit"},a((f=e(o).language_txt.default)==null?void 0:f.text_save),9,Is)])]}),_:1})):S("",!0)])])])}}};export{Qs as default};
