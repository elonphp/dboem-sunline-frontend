import{_ as A}from"./CuDQHfdM.js";import{u as F,r as g,p as f,e as H,q as O,c as r,a as t,t as c,v as s,b as N,w as L,y as k,I as M,L as R,H as z,P as J,B as D,C as E,o as u,d as S,N as K,x as Q}from"./B4Idg1NY.js";const W={class:"bg-block"},X={class:"container"},Y={class:"table-box",id:"table"},Z={class:"title"},ee={class:"my-4 d-flex align-items-center justify-content-between"},te={class:"d-flex col-5 gap-2 align-items-center justify-content-end"},se={class:"d-flex gap-2 align-items-center col-8"},ae=["placeholder"],le={class:"table-inner"},ne={class:"table"},oe={class:"col-4"},ce={class:"text-end pe-5"},re={value:"10",selected:""},ue={value:"30"},ie={value:"50"},de={class:"justify-content-end pe-5"},_e={key:0,class:"pages"},ve=["disabled"],he=["onClick"],ge={key:0},fe={key:1},me=["disabled"],ke={__name:"index",setup(pe){const n=F(),m=g(""),_=g(""),T=()=>{_.value=m.value},U=()=>{_.value=""},p=g([]),v=f(()=>{if(_.value!==""){const l=p.value.filter(e=>e.name.toLowerCase().includes(_.value.toLowerCase()));return l||[]}else return null}),o=g(1),i=g(10),h=f(()=>v.value?Math.ceil(v.value.length/+i.value):Math.ceil(p.value.length/+i.value)),y=l=>{switch(!0){case l==-1:o.value--;break;case l==-2:o.value++;break;default:o.value=l;break}//! 拉至視窗上
document.querySelector("#table").scrollIntoView({behavior:"smooth"})},w=l=>{var e;return(e=n.language_txt.default)==null?void 0:e.text_row_limit.replace(":number",l)},q=l=>o.value==l?"pages-active":null,V=f(()=>Math.floor((o.value-1)/6)*6+1),G=f(()=>Math.min(V.value+6,h.value)),j=f(()=>{const l=(o.value-1)*i.value,e=o.value*i.value;return v.value?v.value.slice(l,e):p.value.slice(l,e)});H(()=>{v.value&&(o.value=1)});const I=async()=>{const l=`${n.baseUrl}api/v2/dealers/option/list?locale=${n.language}`;try{const e=await fetch(l,{headers:{Authorization:"Bearer "+n.userData.jwtToken}}),b=await e.json();e.ok&&(p.value=Object.values(b.response.data).filter(x=>x.option_values))}catch(e){console.log(e)}};return n.show_loading(!0),O(async()=>{await I(),n.show_loading(!1)}),(l,e)=>{var x,P,$,B;const b=A;return u(),r("section",W,[t("div",X,[t("div",Y,[t("h2",Z,c((x=s(n).language_txt.order)==null?void 0:x.text_option_setting),1),t("div",ee,[N(b,{to:"/home",class:"btn link align-self-center"},{default:L(()=>{var a;return[S(c((a=s(n).language_txt.default)==null?void 0:a.text_back),1)]}),_:1}),t("div",te,[s(_)?(u(),r("button",{key:0,class:"me-2",onClick:U},c(s(n).language_txt.text_cancel)+c((P=s(n).language_txt.default)==null?void 0:P.text_search),1)):k("",!0),t("div",se,[M(t("input",{type:"text",placeholder:s(n).language_txt.text_keyword,class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>z(m)?m.value=a:null)},null,8,ae),[[R,s(m)]]),t("button",{type:"button",class:"btn search align-self-stretch",onClick:T},c(($=s(n).language_txt.default)==null?void 0:$.text_search),1)])])]),t("div",le,[t("table",ne,[t("thead",null,[t("tr",null,[t("th",oe,c((B=s(n).language_txt.default)==null?void 0:B.text_column_name),1),t("th",ce,[M(t("select",{class:"form-select-sm px-3","onUpdate:modelValue":e[1]||(e[1]=a=>z(i)?i.value=a:null)},[t("option",re,c(w(10)),1),t("option",ue,c(w(30)),1),t("option",ie,c(w(50)),1)],512),[[J,s(i)]])])])]),t("tbody",null,[(u(!0),r(D,null,E(s(j),(a,d)=>(u(),r("tr",{key:"data_"+d},[t("td",null,c(a.name),1),t("td",de,[N(b,{to:`/order-setting/${a.id}`,class:"method-btn large"},{default:L(()=>{var C;return[S(c((C=s(n).language_txt.default)==null?void 0:C.text_setting),1)]}),_:2},1032,["to"])])]))),128))])])]),s(j).length>0?(u(),r("div",_e,[t("button",{disabled:s(o)===1,onClick:e[2]||(e[2]=a=>y(-1))},e[4]||(e[4]=[t("i",{class:"fas fa-caret-left"},null,-1)]),8,ve),(u(!0),r(D,null,E(s(h),(a,d)=>M((u(),r("button",{key:a,class:Q(q(a)),onClick:C=>y(a)},[d+1==s(h)&&s(o)!==a?(u(),r("span",ge,"...")):k("",!0),S(" "+c(a)+" ",1),d+1==1&&s(o)!==a?(u(),r("span",fe,"...")):k("",!0)],10,he)),[[K,a>=s(V)&&a<=s(G)||d+1==s(h)||d+1==1]])),128)),t("button",{disabled:s(o)===s(h),onClick:e[3]||(e[3]=a=>y(-2))},e[5]||(e[5]=[t("i",{class:"fas fa-caret-right"},null,-1)]),8,me)])):k("",!0)])])])}}};export{ke as default};
